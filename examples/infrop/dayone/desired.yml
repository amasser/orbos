kind: orbiter.caos.ch/Orbiter
version: v1
deps:
  prod:
    kind: orbiter.caos.ch/KubernetesCluster
    version: v1
    spec:
      version: "v1.15.0"
      controlplane:
        updatesDisabled: false
        provider: static
        nodes: 1
        pool: controlplane
      workers:
        static:
          updatesDisabled: false
          provider: static
          nodes: 1
          pool: isolated
    deps:
      static:
        kind: orbiter.caos.ch/StaticProvider
        version: v1
        spec:
          remoteuser: root
          remotePublicKeyPath: /root/.ssh/authorized_keys
          pools:
            controlplane:
            - id: first
              hostname: an.ubuntu
              externalIP: 10.61.0.126
              internalIP: 10.61.0.126
            - id: second
              hostname: a.centos
              externalIP: 10.61.0.127
              internalIP: 10.61.0.127
            - id: third
              hostname: another.ubuntu
              externalIP: 10.61.0.128
              internalIP: 10.61.0.128
            isolated:
            - id: fourth
              hostname: again.an.ubuntu
              externalIP: 10.61.0.129
              internalIP: 10.61.0.129
        deps:
          dynamic:
            kind: orbiter.caos.ch/DynamicLoadBalancer
            version: v1
            spec:
              controlplane:
              - ip: "10.61.0.254"
                transport:
                - name: kubeapi
                  sourcePort: 6443
                  destinations:
                  - port: 6443
                    pool: controlplane
              isolated:
              - ip: "10.61.0.253"
                transport:
                - name: dashboard
                  sourcePort: 443
                  destinations:
                  - port: 443
                    pool: controlplane
              - ip: "10.61.0.252"
                transport:
                - name: httpsingress
                  sourcePort: 443
                  destinations:
                  - port: 443
                    pool: isolated
                - name: httpingress
                  sourcePort: 80
                  destinations:
                  - port: 80
                    pool: controlplane
                  - port: 8080
                    pool: isolated
